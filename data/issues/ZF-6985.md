---
layout: issue
title: "Zend_Form_Element::_loadValidator() only configures validator via constructor"
id: ZF-6985
---

ZF-6985: Zend\_Form\_Element::\_loadValidator() only configures validator via constructor
-----------------------------------------------------------------------------------------

 Issue Type: Improvement Created: 2009-06-11T10:49:06.000+0000 Last Updated: 2012-11-20T20:53:23.000+0000 Status: Closed Fix version(s): 
 Reporter:  Adrian Hardy (adrianh)  Assignee:  None  Tags: - Zend\_Form
 
 Related issues: 
 Attachments: 
### Description

Hi,

I've been using Zend\_Config to configure Zend\_Form with some custom validators.

At present (1.8.3/trunk), Zend\_Form\_Element::\_loadValidator() configures the new validator by passing options through the constructor (line 2010). This means that your Zend\_Config file must specify the validator options in the correct order.

Perhaps having Zend\_Form\_Element::\_loadValidator() check for the availability of "setOptions" on the validator and calling that (passing in the associative array generated by Zend\_Config::toArray()) would be more in keeping with the rest of the framework? Obviously, such a change has backwards compatibility implications for people's code.

Thanks,

Adrian

 

 

### Comments

Posted by Adrian Hardy (adrianh) on 2009-06-11T10:51:28.000+0000

Suggested patch:

 
    <pre class="literal">
    @@ -2011,6 +2011,10 @@
                 } else {
                     $instance = $r->newInstance();
                 }
    +
    +            if ($r->hasMethod('setOptions')) {
    +               $instance->setOptions((array) $validator['options']);
    +            }
    
                 if ($messages) {
                     if (is_array($messages)) {


 

 

Posted by Rob Allen (rob) on 2012-11-20T20:53:23.000+0000

Bulk change of all issues last updated before 1st January 2010 as "Won't Fix".

Feel free to re-open and provide a patch if you want to fix this issue.

 

 