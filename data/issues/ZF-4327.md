---
layout: issue
title: "http client socket adapter for rest client fails for virtual host"
id: ZF-4327
---

ZF-4327: http client socket adapter for rest client fails for virtual host
--------------------------------------------------------------------------

 Issue Type: Bug Created: 2008-09-18T13:39:05.000+0000 Last Updated: 2008-10-12T01:55:51.000+0000 Status: Resolved Fix version(s): 
 Reporter:  michael depetrillo (klassicd)  Assignee:  Shahar Evron (shahar)  Tags: - Zend\_Http\_Client
- Zend\_Rest\_Client
 
 Related issues: 
 Attachments: 
### Description

I have been using Zend\_Rest\_Client to interact with a Zend\_Rest\_Server on another domain.

I recently moved the rest server to the same machine as the rest client. They now share the same IP address and are setup as apache virtual hosts.

Ever since the move, the rest client returns a 404 error. I examined the uri, headers and body being sent via the socket adapter (Zend\_Http\_Client\_Adapter\_Socket) and everything looks great. But the response from my server is a 404. I can successfully take the uri from the socket request and load it in a browser and see XML results.

I checked my server logs and it appears the client request is being picked up by the default virtual host for my primary IP address. The socket adapter is requesting an accurate hostname and path but apache is interpreting as a request for the primary IP address.

I am unfamiliar with sockets and do not understand why this would happen.

I am behind a firewall and both sites do share the same IP address in apache. Could these be my problem?

 

 

### Comments

Posted by Shahar Evron (shahar) on 2008-10-11T04:47:52.000+0000

There should be no reason why Zend\_Http\_Client should not properly work with virtual hosts - it works all the time.

It would help if you could come up with some minimal reproduction script, and perhaps a dump of the HTTP traffic sent form Zend\_Http\_Client (I assume you have this because you say the headers look good). Also, some more info on your code / configuration would help.

 

 

Posted by michael depetrillo (klassicd) on 2008-10-11T19:45:14.000+0000

I had to add my domain to /etc/hosts because I am behind a firewall. This is not a bug.

 

 

Posted by Shahar Evron (shahar) on 2008-10-12T01:55:51.000+0000

Not a bug then, closing.

 

 